<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/ko/webgl-scene-graph.md. Do not edited directly -->
<!--
Copyright 2021 GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="ko">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="장면 그래프의 용도">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ko.jpg">

<meta property="og:title" content="WebGL - 장면 그래프">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ko.jpg">
<meta property="og:description" content="장면 그래프의 용도">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL - 장면 그래프">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html">
<meta name="twitter:description" content="장면 그래프의 용도">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ko.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-scene-graph_ko.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html",
      "inLanguage":"ko",
      "name":"WebGL - 장면 그래프",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL - 장면 그래프</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/ko/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-scene-graph.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-scene-graph.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-scene-graph.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-scene-graph.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-scene-graph.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-scene-graph.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-scene-graph.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-scene-graph.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-scene-graph.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-scene-graph.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-scene-graph.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-scene-graph.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-scene-graph.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-scene-graph.html" >简体中文</a>
</select>


    <a href="#toc">목차</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/ko/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL - 장면 그래프</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>이 글은 WebGL 관련 시리즈에서 이어집니다.
이전에는 <a href="webgl-drawing-multiple-things.html">여러 물체 그리기</a>에 관한 것이었습니다. 
아직 읽지 않았다면 거기부터 시작하는 게 좋습니다.</p>
<p>장면 그래프는 트리의 각 노드가 행렬을 생성하는 트리 구조입니다.
흠, 이건 쓸모있는 정의가 아니네요.
몇 가지 예제가 더 유용할 것 같습니다.</p>
<p>대부분의 3D 엔진은 장면 그래프를 사용합니다.
표시하고 싶을 걸 장면 그래프에 넣게 되는데요.
그러면 엔진은 장면 그래프를 살펴보고 그릴 목록을 파악합니다.
장면 그래프는 계층 구조이기 때문에, 우주 시뮬레이션을 만들고 싶다면, 다음과 같은 그래프가 있어야 할 겁니다.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 500px;" src="/webgl/lessons/resources/planet-diagram.html"></iframe>
</div>

</p>
<p>장면 그래프의 요점은 뭘까요?
장면 그래프의 #1 기능은 <a href="webgl-2d-matrices.html">2D 행렬 수학</a>에서 다룬 것처럼 행렬에 대한 부모 자식 관계 제공한다는 겁니다.
예를 들어 단순하지만 비현실적인 우주 시뮬레이션에서 별(자식)은 은하(부모)를 따라 이동합니다.
마찬가지로 위성(자식)은 행성(부모)을 따라 이동하는데요.
지구를 움직인다면 달이 함께 움직일 겁니다.
은하를 움직인다면 내부의 모든 별들이 함께 움직입니다.
위 다이어그램의 이름들을 드래그하면 그들의 관계를 볼 수 있습니다.</p>
<p><a href="webgl-2d-matrices.html">2D 행렬 수학</a>으로 돌아가보면 평행 이동, 회전, 스케일링을 하기 위한 많은 행렬을 객체에 곱한 걸 기억하실 겁니다.
장면 그래프는 객체에 어떤 행렬 수식을 적용할지 도와주는 구조를 제공합니다.</p>
<p>일반적으로 장면 그래프의 각 <code class="notranslate" translate="no">Node</code>는 <em>지역 공간</em>를 나타냅니다.
올바른 행렬 수식이 주어지면 <em>지역 공간</em>에 있는 무엇이든 그 위에 있는 모든 걸 무시할 수 있습니다.
다시 말해 달은 지구 궤도를 선회하는 것에만 신경쓰면 된다는 겁니다.
태양 궤도를 선회하는 것에 대해서는 신경쓰지 않아도 되죠.
장면 그래프 구조가 없다면 달이 태양 궤도를 선회하는 방법을 계산하기 위해 훨씬 더 복잡한 수식을 수행해야 합니다.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 300px;" src="/webgl/lessons/resources/moon-orbit.html"></iframe>
</div>

</p>
<p>장면 그래프로 달을 지구의 자식으로 만들면 지구의 궤도를 선회합니다.
그리고 장면 그래프는 지구가 태양을 선회한다는 사실을 처리하는데요.
노드를 탐색하다가 행렬을 곱하여 이를 수행합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">worldMatrix = greatGrandParent * grandParent * parent * self(localMatrix)
</code></pre><p>우주 시뮬레이션의 구체적인 표현으로 바꿔보면 다음과 같습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">worldMatrixForMoon = galaxyMatrix * starMatrix * planetMatrix * moonMatrix;
</code></pre><p>재귀 함수로 이를 매우 간단하게 할 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">function computeWorldMatrix(currentNode, parentWorldMatrix) {
    // 지역 행렬을 부모의 월드 행렬로 곱하여 &quot;worldMatrix&quot;를 계산
    var worldMatrix = m4.multiply(parentWorldMatrix, currentNode.localMatrix);

    // 모든 자식에게 동일하게 수행
    currentNode.children.forEach(function(child) {
        computeWorldMatrix(child, worldMatrix);
    });
}
</code></pre><p>이는 3D 장면 그래프에서 굉장히 일반적인 용어를 가져온 겁니다.</p>
<ul>
<li><p><code class="notranslate" translate="no">localMatrix</code>: 현재 노드에 대한 지역 행렬 입니다.
원점에서 자신과 함께 지역 공간의 자식들을 변형시킵니다.</p>
</li>
<li><p><code class="notranslate" translate="no">worldMatrix</code>: 주어진 노드의 지역 공간에 있는 걸 가져와 장면 그래프의 루트 노드 공간으로 변환합니다.
다시 말해 월드에 배치합니다.
달에 대한 <code class="notranslate" translate="no">worldMatrix</code>를 계산하면 위에서 본 궤도를 얻게 될 겁니다.</p>
</li>
</ul>
<p>장면 그래프는 굉장히 만들기 쉽습니다.
간단한 <code class="notranslate" translate="no">Node</code> 객체를 정의해봅시다.
장면 그래프를 구성하는 방법은 무수히 많지만 어떤 방법이 가장 좋은지는 모르겠습니다.
가장 일반적인 방법은 그리는 사물의 선택적 필드를 가지는 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var node = {
   localMatrix: ...,  // 노드에 대한 &quot;지역&quot; 행렬
   worldMatrix: ...,  // 노드에 대한 &quot;월드&quot; 행렬
   children: [],      // 자식 배열
   thingToDraw: ??,   // 노드에서 그리는 요소
};
</code></pre><p>태양계 장면 그래프를 만들어 봅시다.
멋진 텍스처나 예제를 복잡하게 만들 수 있는 것은 사용하지 않겠습니다.
먼저 노드 관리를 도와줄 몇 가지 함수를 만들어 보려고 하는데요.
우선 노드 클래스를 만듭니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var Node = function() {
  this.children = [];
  this.localMatrix = m4.identity();
  this.worldMatrix = m4.identity();
};
</code></pre><p>노드의 부모를 설정하는 방법을 제공합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">Node.prototype.setParent = function(parent) {
  // 부모에서 자식 제거
  if (this.parent) {
    var ndx = this.parent.children.indexOf(this);
    if (ndx &gt;= 0) {
      this.parent.children.splice(ndx, 1);
    }
  }

  // 새로운 부모에 자식 추가
  if (parent) {
    parent.children.append(this);
  }
  this.parent = parent;
};
</code></pre><p>그리고 여기 부모-자식 관계를 기반으로 지역 행렬에서 월드 행렬을 계산하는 코드입니다.
부모에서 시작해 재귀적으로 자식들을 찾아가면 월드 행렬을 계산할 수 있습니다.
행렬 수학을 모른다면 <a href="webgl-2d-matrices.html">이 글</a>을 확인해주세요.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">Node.prototype.updateWorldMatrix = function(parentWorldMatrix) {
  if (parentWorldMatrix) {
    // 행렬이 전달되므로 수식을 수행하고 결과를 &quot;this.worldMatrix&quot;에 저장
    m4.multiply(this.localMatrix, parentWorldMatrix, this.worldMatrix);
  } else {
    // 행렬이 전달되지 않았으니 &quot;localMatrix&quot;를 &quot;worldMatrix&quot;로 복사
    m4.copy(this.localMatrix, this.worldMatrix);
  }

  // 모든 자식 처리
  var worldMatrix = this.worldMatrix;
  this.children.forEach(function(child) {
    child.updateWorldMatrix(worldMatrix);
  });
};
</code></pre><p>단순하게 하기 위해 태양, 지구, 달만 해봅시다.
물론 화면에 맞게 가짜 거리를 사용합니다.
하나의 구체 모형만 사용하고 태양은 황색, 지구는 청록색, 달은 회색으로 칠할 겁니다.
<code class="notranslate" translate="no">drawInfo</code>, <code class="notranslate" translate="no">bufferInfo</code>, <code class="notranslate" translate="no">programInfo</code>가 익숙하지 않다면 <a href="webgl-drawing-multiple-things.html">이전 글</a>을 봐주세요.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 모든 노드 만들기
var sunNode = new Node();
sunNode.localMatrix = m4.translation(0, 0, 0);  // 중앙에 태양
sunNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.6, 0.6, 0, 1], // 노랑
    u_colorMult:   [0.4, 0.4, 0, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};

var earthNode = new Node();
earthNode.localMatrix = m4.translation(100, 0, 0);  // 지구는 태양으로부터 100유닛
earthNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.2, 0.5, 0.8, 1],  // 청록색
    u_colorMult:   [0.8, 0.5, 0.2, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};

var moonNode = new Node();
moonNode.localMatrix = m4.translation(20, 0, 0);  // 달은 지구로부터 20유닛
moonNode.drawInfo = {
  uniforms: {
    u_colorOffset: [0.6, 0.6, 0.6, 1],  // 회색
    u_colorMult:   [0.1, 0.1, 0.1, 1],
  },
  programInfo: programInfo,
  bufferInfo: sphereBufferInfo,
};
</code></pre><p>이제 노드를 만들었으니 이들을 연결합시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 천체 연결
moonNode.setParent(earthNode);
earthNode.setParent(sunNode);
</code></pre><p>그리고 다시 객체 목록과 그릴 객체 목록을 만들 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var objects = [
  sunNode,
  earthNode,
  moonNode,
];

var objectsToDraw = [
  sunNode.drawInfo,
  earthNode.drawInfo,
  moonNode.drawInfo,
];
</code></pre><p>렌더링할 때 각 객체의 지역 행렬을 약간 회전하여 업데이트합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 각 객체에 대한 지역 행렬 업데이트
m4.multiply(m4.yRotation(0.01), sunNode.localMatrix  , sunNode.localMatrix);
m4.multiply(m4.yRotation(0.01), earthNode.localMatrix, earthNode.localMatrix);
m4.multiply(m4.yRotation(0.01), moonNode.localMatrix , moonNode.localMatrix);
</code></pre><p>이제 지역 행렬이 업데이트되었으니 모든 월드 행렬을 업데이트할 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">sunNode.updateWorldMatrix();
</code></pre><p>마지막으로 월드 행렬이 있으니 각 객체에 대한 <a href="webgl-3d-perspective.html">월드 뷰 투영 행렬</a>을 구하기 위해 곱해야 합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 렌더링을 위한 모든 행렬 계산
objects.forEach(function(object) {
  object.drawInfo.uniforms.u_matrix = m4.multiply(viewProjectionMatrix, object.worldMatrix);
});
</code></pre><p>렌더링은 <a href="webgl-drawing-multiple-things.html">지난 글</a>에서 본 것과 같은 루프입니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>모든 행성이 같은 크기임을 알 수 있는데요.
지구를 더 크게 만들어 보겠습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 지구는 태양으로부터 100유닛
earthNode.localMatrix = m4.translation(100, 0, 0);
// 지구를 두 배로 만들기
earthNode.localMatrix = m4.scale(earthNode.localMatrix, 2, 2, 2);
</code></pre><p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-larger-earth.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-larger-earth.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>이런 달도 커졌군요.
이를 고치기 위해 수동으로 달을 축소할 수 있습니다.
하지만 더 좋은 해결책은 장면 그래프에 노드를 더 추가하는 겁니다.
아래 장면 그래프 대신에,</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">  태양
   |
  지구
   |
   달
</code></pre><p>이렇게 바꿀 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">   태양계
   |  |
   | 태양
   |
   지구 궤도
   |    |
   |   지구
   |
   달 궤도
      |
      달
</code></pre><p>이렇게 하면 지구는 태양계 주변을 돌지만, 태양만 개별적으로 회전하고 크기 조정할 수 있으며, 지구에는 영향을 주지 않습니다.
마찬가지로 지구는 달과 별도로 회전할 수 있습니다.
<code class="notranslate" translate="no">solarSystem</code>, <code class="notranslate" translate="no">earthOrbit</code> <code class="notranslate" translate="no">moonOrbit</code>에 대한 노드를 만들어 봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var solarSystemNode = new Node();
var earthOrbitNode = new Node();
earthOrbitNode.localMatrix = m4.translation(100, 0, 0);  // 지구 궤도는 태양으로부터 100유닛
var moonOrbitNode = new Node();
moonOrbitNode.localMatrix = m4.translation(20, 0, 0);  // 달은 지구로부터 100유닛
</code></pre><p>이러한 궤도 거리는 기존 노드에서 제거되었습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var earthNode = new Node();
-// 지구는 태양으로부터 100유닛
-earthNode.localMatrix = m4.translation(100, 0, 0);
-// 지구를 두 배로 만들기
-earthNode.localMatrix = m4.scale(earthNode.localMatrix, 2, 2, 2);
+earthNode.localMatrix = m4.scaling(2, 2, 2);   // 지구를 두 배로 만들기

var moonNode = new Node();
-moonNode.localMatrix = m4.translation(20, 0, 0);  // 달은 지구로부터 20유닛
</code></pre><p>이제 연결하는 것은 다음과 같습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 천체 연결
sunNode.setParent(solarSystemNode);
earthOrbitNode.setParent(solarSystemNode);
earthNode.setParent(earthOrbitNode);
moonOrbitNode.setParent(earthOrbitNode);
moonNode.setParent(moonOrbitNode);
</code></pre><p>그리고 궤도만 업데이트하면 됩니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 각 객체에 대한 지역 행렬 업데이트
-m4.multiply(m4.yRotation(0.01), sunNode.localMatrix  , sunNode.localMatrix);
-m4.multiply(m4.yRotation(0.01), earthNode.localMatrix, earthNode.localMatrix);
-m4.multiply(m4.yRotation(0.01), moonNode.localMatrix , moonNode.localMatrix);
+m4.multiply(m4.yRotation(0.01), earthOrbitNode.localMatrix, earthOrbitNode.localMatrix);
+m4.multiply(m4.yRotation(0.01), moonOrbitNode.localMatrix, moonOrbitNode.localMatrix);

// 장면 그래프의 모든 월드 행렬 업데이트
-sunNode.updateWorldMatrix();
+solarSystemNode.updateWorldMatrix();
</code></pre><p>이제 지구는 두 배 크기고, 달은 그대로인 것을 볼 수 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-larger-earth-fixed.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-larger-earth-fixed.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>또한 태양과 지구가 더 이상 제자리에서 회전하지 않는 것을 알 수 있는데요.
이제 그건 독립적입니다.</p>
<p>몇 가지 더 조정해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">-sunNode.localMatrix = m4.translation(0, 0, 0);  // 중앙에 태양
+sunNode.localMatrix = m4.scaling(5, 5, 5);

...

+moonNode.localMatrix = m4.scaling(0.4, 0.4, 0.4);

...
// 각 객체에 대한 지역 행렬 업데이트
matrixMultiply(earthOrbitNode.localMatrix, m4.yRotation(0.01), earthOrbitNode.localMatrix);
matrixMultiply(moonOrbitNode.localMatrix, m4.yRotation(0.01), moonOrbitNode.localMatrix);
+// 지구 회전
+m4.multiply(m4.yRotation(0.05), earthNode.localMatrix, earthNode.localMatrix);
+// 달 회전
+m4.multiply(m4.yRotation(-0.01), moonNode.localMatrix, moonNode.localMatrix);
</code></pre><p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-solar-system-adjusted.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-solar-system-adjusted.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>현재 <code class="notranslate" translate="no">localMatrix</code>를 가지고 있으며 프레임마다 이를 수정하고 있습니다.
하지만 모든 프레임에서 수식이 약간의 오류를 수집한다는 문제가 있는데요.
<em>직교 정규화 행렬</em>이라 불리는 수식을 고치는 방법이 있지만 항상 작동하지는 않습니다.
예를 들어 크기를 0으로 줄였다가 돌아오게 한다고 가정해 보겠습니다.
<code class="notranslate" translate="no">x</code>에 대해 그렇게 해봅시다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">x = 246;       // frame #0, x = 246

scale = 1;
x = x * scale  // frame #1, x = 246

scale = 0.5;
x = x * scale  // frame #2, x = 123

scale = 0;
x = x * scale  // frame #3, x = 0

scale = 0.5;
x = x * scale  // frame #4, x = 0  이런!

scale = 1;
x = x * scale  // frame #5, x = 0  이런!
</code></pre><p>값을 잃었습니다.
다른 값들로 행렬을 업데이트하는 다른 클래스를 추가하여 이를 고칠 수 있는데요.
<code class="notranslate" translate="no">source</code>를 가지도록 <code class="notranslate" translate="no">Node</code> 정의를 수정해봅시다.
이미 존재한다면 <code class="notranslate" translate="no">source</code>에 지역 행렬을 요청할 겁니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">*var Node = function(source) {
  this.children = [];
  this.localMatrix = m4.identity();
  this.worldMatrix = m4.identity();
+  this.source = source;
};

Node.prototype.updateWorldMatrix = function(matrix) {

+  var source = this.source;
+  if (source) {
+    source.getMatrix(this.localMatrix);
+  }

  ...
</code></pre><p>이제 소스를 생성할 수 있습니다.
일반적인 소스는 다음과 같이 평행 이동, 회전, 스케일링을 제공합니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">var TRS = function() {
  this.translation = [0, 0, 0];
  this.rotation = [0, 0, 0];
  this.scale = [1, 1, 1];
};

TRS.prototype.getMatrix = function(dst) {
  dst = dst || new Float32Array(16);
  var t = this.translation;
  var r = this.rotation;
  var s = this.scale;

  // 평행 이동, 회전, 스케일링으로 행렬 계산
  m4.translation(t[0], t[1], t[2], dst);
  matrixMultiply(m4.xRotation(r[0]), dst, dst);
  matrixMultiply(m4.yRotation(r[1]), dst, dst);
  matrixMultiply(m4.zRotation(r[2]), dst, dst);
  matrixMultiply(m4.scaling(s[0], s[1], s[2]), dst, dst);
  return dst;
};
</code></pre><p>그리고 이렇게 사용할 수 있습니다.</p>
<pre class="prettyprint notranslate" translate="no"><code class="notranslate" translate="no">// 초기화할 때 소스로 노드 만들기
var someTRS  = new TRS();
var someNode = new Node(someTRS);

// 렌더링할 때
someTRS.rotation[2] += elapsedTime;
</code></pre><p>이제 매번 행렬을 재생성하기 때문에 문제가 없습니다.</p>
<p>&quot;나는 태양계를 만들고 있지 않은데 요점이 뭐지?&quot;라고 생각하실 수 있는데요.
음, 사람 애니메이션을 만든다면 다음과 같은 장면 그래프를 가질 수 있습니다.</p>
<p><div class="webgl_diagram_container">
  <iframe class="webgl_example " style="width: 400px; height: 400px;" src="/webgl/lessons/resources/person-diagram.html"></iframe>
</div>

</p>
<p>손가락과 발가락에 얼마나 많은 관절을 추가할지는 여러분이 정하면 되는데요
관절이 많아질수록 애니메이션을 계산하는데 더 많은 연산이 필요하고, 모든 관절 정보를 제공하기 위해 더 많은 애니메이션 데이터가 필요합니다.
버추어 파이터처럼 오래된 게임들은 약 15개의 관절을 가졌습니다.
2000년대 초반부터 중반까지의 게임들은 30~70개의 관절을 가졌죠.
손의 모든 관절을 구현한다면 각 손에 20개 이상의 관절이 있으므로 두 손에만 관절이 40개입니다.
손 애니메이션을 구현하려는 많은 게임들은 엄지 손가락 하나 그리고 4개의 손가락을 하나의 큰 손가락으로 애니메이션하여 시간(CPU/GPU/아티스트 시간)과 메모리를 절약합니다.</p>
<p>어쨌든 여기 제가 해킹한 블록맨이 있습니다.
각 노드에 대해 위에서 언급한 <code class="notranslate" translate="no">TRS</code> 소스를 사용하고 있습니다.</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-scene-graph-block-guy.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-scene-graph-block-guy.html" target="_blank">새 창을 열려면 여기를 클릭</a>
</div>

</p>
<p>대부분의 3D 라이브러리를 보면 이와 유사한 장면 그래프를 찾을 수 있습니다.</p>
<div class="webgl_bottombar">
<h3>SetParent vs AddChild / RemoveChild</h3>
<p>
많은 장면 그래프가 <code class="notranslate" translate="no">node.addChild</code> 함수와 <code class="notranslate" translate="no">node.removeChild</code> 함수를 가지지만 위에서는 <code class="notranslate" translate="no">node.setParent</code> 함수를 만들었습니다.
어느 쪽이 더 좋은지는 스타일의 문제지만 제가 <code class="notranslate" translate="no">addChild</code>보다 <code class="notranslate" translate="no">setParent</code>가 더 좋다고 주장하는 객관적인 이유는 다음과 같은 코드를 불가능하게 만들기 때문입니다.
</p>
<pre class="prettyprint">
    someParent.addChild(someNode);
    ...
    someOtherParent.addChild(someNode);
</pre>
<p>
그게 무슨 뜻일까요?
<code class="notranslate" translate="no">someNode</code>는 <code class="notranslate" translate="no">someParent</code>와 <code class="notranslate" translate="no">someOtherParent</code>에 모두 추가될까요?
대부분의 장면 그래프에서는 불가능합니다.
두 번째 호출에서 오류가 발생할까요?
<code class="notranslate" translate="no">ERROR: Already have parent.</code>
아니면 <code class="notranslate" translate="no">someOtherParent</code>에 추가하기 전에 <code class="notranslate" translate="no">someParent</code>에서 <code class="notranslate" translate="no">someNode</code>를 제거할까요?
그렇다면 <code class="notranslate" translate="no">addChild</code>라는 이름은 명확하지 않습니다.
</p>
<p>반면에 <code class="notranslate" translate="no">setParent</code>는 그런 문제가 없습니다.</p>
<pre class="prettyprint">
    someNode.setParent(someParent);
    ...
    someNode.setParent(someOtherParent);
</pre>
<p>
이 경우 무슨 일이 일어나는지 분명합니다.
모호함이 전혀 없죠.
</p>
</div>


    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-scene-graph.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-scene-graph.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-scene-graph.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-scene-graph.html" selected>한국어</a>
    <option value="/webgl/lessons/pl/webgl-scene-graph.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-scene-graph.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-scene-graph.html" >Русский</a>
    <option value="/webgl/lessons/zh_cn/webgl-scene-graph.html" >简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>기초</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-fundamentals.html">기초</a></li>
<li><a href="/webgl/lessons/ko/webgl-how-it-works.html">작동 방식</a></li>
<li><a href="/webgl/lessons/ko/webgl-shaders-and-glsl.html">셰이더와 GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL 상태 다이어그램</a></li>
        </ul>
  <li>이미지 처리</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-image-processing.html">이미지 처리</a></li>
<li><a href="/webgl/lessons/ko/webgl-image-processing-continued.html">이미지 처리 심화</a></li>
        </ul>
  <li>2D 평행 이동, 회전, 스케일, 행렬 수학</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-translation.html">2D 평행 이동</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-rotation.html">2D 회전</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-scale.html">2D 스케일</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrices.html">2D 행렬</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-orthographic.html">3D 직교 투영</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective.html">3D 원근 투영</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-camera.html">3D 카메라</a></li>
        </ul>
  <li>조명</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-lighting-directional.html">방향성 조명</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-point.html">점 조명</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-lighting-spot.html">스포트라이트</a></li>
        </ul>
  <li>구조와 구성</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-less-code-more-fun.html">유틸리티 함수</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-multiple-things.html">여러 물체 그리기</a></li>
<li><a href="/webgl/lessons/ko/webgl-scene-graph.html">장면 그래프</a></li>
        </ul>
  <li>지오메트리</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-geometry-lathe.html">지오메트리 - 선반 가공</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj.html">.obj 파일 로딩</a></li>
<li><a href="/webgl/lessons/ko/webgl-load-obj-w-mtl.html">.mtl 파일로 .obj 로딩</a></li>
        </ul>
  <li>텍스처</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-3d-textures.html">텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-data-textures.html">데이터 텍스처</a></li>
<li><a href="/webgl/lessons/ko/webgl-2-textures.html">2개 이상의 텍스처 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-cors-permission.html">교차 출처 이미지</a></li>
<li><a href="/webgl/lessons/ko/webgl-3d-perspective-correct-texturemapping.html">원근 교정 텍스처 매핑</a></li>
<li><a href="/webgl/lessons/ko/webgl-planar-projection-mapping.html">평면 및 원근 투영 매핑</a></li>
        </ul>
  <li>텍스처 렌더링</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-render-to-texture.html">텍스처 렌더링</a></li>
        </ul>
  <li>그림자</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-shadows.html">그림자</a></li>
        </ul>
  <li>기법</li>
        <ul>
            <li>2D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-2d-drawimage.html">2D - DrawImage</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-matrix-stack.html">2D - 행렬 스택</a></li>
<li><a href="/webgl/lessons/ko/webgl-sprites.html">스프라이트</a></li>
        </ul>
  <li>3D</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-cube-maps.html">큐브맵</a></li>
<li><a href="/webgl/lessons/ko/webgl-environment-maps.html">환경맵</a></li>
<li><a href="/webgl/lessons/ko/webgl-skybox.html">스카이박스</a></li>
<li><a href="/webgl/lessons/ko/webgl-skinning.html">스키닝</a></li>
<li><a href="/webgl/lessons/ko/webgl-fog.html">안개</a></li>
<li><a href="/webgl/lessons/ko/webgl-picking.html">피킹 (물체 클릭)</a></li>
        </ul>
  <li>텍스트</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-text-html.html">텍스트 - HTML</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-canvas2d.html">텍스트 - Canvas 2D</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-texture.html">텍스트 - 텍스처 사용</a></li>
<li><a href="/webgl/lessons/ko/webgl-text-glyphs.html">텍스트 - 글리프 텍스처 사용</a></li>
        </ul>
  <li>텍스처</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-ramp-textures.html">램프 텍스처 (툰 셰이딩)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>팁</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-smallest-programs.html">최소 프로그램</a></li>
<li><a href="/webgl/lessons/ko/webgl-drawing-without-data.html">데이터 없이 그리기</a></li>
<li><a href="/webgl/lessons/ko/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/ko/webgl-pulling-vertices.html">정점 풀링</a></li>
        </ul>
  <li>최적화</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-indexed-vertices.html">색인된 정점 (gl.drawElements)</a></li>
<li><a href="/webgl/lessons/ko/webgl-instanced-drawing.html">색인된 그리기</a></li>
        </ul>
  <li>Misc</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-setup-and-installation.html">설정 및 설치</a></li>
<li><a href="/webgl/lessons/ko/webgl-boilerplate.html">상용구</a></li>
<li><a href="/webgl/lessons/ko/webgl-resizing-the-canvas.html">캔버스 크기 조정</a></li>
<li><a href="/webgl/lessons/ko/webgl-animation.html">애니메이션</a></li>
<li><a href="/webgl/lessons/ko/webgl-points-lines-triangles.html">점, 선, 삼각형</a></li>
<li><a href="/webgl/lessons/ko/webgl-multiple-views.html">다중 뷰, 다중 캔버스</a></li>
<li><a href="/webgl/lessons/ko/webgl-visualizing-the-camera.html">카메라 시각화</a></li>
<li><a href="/webgl/lessons/ko/webgl-and-alpha.html">WebGL 알파</a></li>
<li><a href="/webgl/lessons/ko/webgl-2d-vs-3d-library.html">2D vs 3D 라이브러리</a></li>
<li><a href="/webgl/lessons/ko/webgl-anti-patterns.html">안티 패턴</a></li>
<li><a href="/webgl/lessons/ko/webgl-matrix-vs-math.html">WebGL 행렬 vs 수학 행렬</a></li>
<li><a href="/webgl/lessons/ko/webgl-precision-issues.html">정밀도 문제</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#screenshot">스크린샷 찍기</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#preservedrawingbuffer">캔버스 지우기 방지</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#tabindex">캔버스 키보드 입력</a></li>
<li><a href="/webgl/lessons/ko/webgl-tips.html#html-background">WebGL 배경 제작</a></li>
<li><a href="/webgl/lessons/ko/webgl-cross-platform-issues.html">크로스 플랫폼 문제</a></li>
<li><a href="/webgl/lessons/ko/webgl-qna.html">질문 및 답변</a></li>
        </ul>
  <li>참고</li>
        <ul>
          <li><a href="/webgl/lessons/ko/webgl-attributes.html">속성</a></li>
<li><a href="/webgl/lessons/ko/webgl-texture-units.html">텍스처 유닛</a></li>
<li><a href="/webgl/lessons/ko/webgl-framebuffers.html">프레임 버퍼</a></li>
<li><a href="/webgl/lessons/ko/webgl-readpixels.html">readPixels</a></li>
<li><a href="/webgl/lessons/ko/webgl-references.html">참고 자료</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">도우미 API 문서</a></li>
  <li><a href="https://twgljs.org">TWGL, 가벼운 WebGL 라이브러리</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Github</a></li>
</ul>

        </div>
    </div>
    <div class="lesson-comments">
        
    <div>이슈/버그는? <a href="https://github.com/gfxfundamentals/webgl-fundamentals/issues">Github</a>에 이슈를 만들어주세요.</div>
    <div class="lesson-comment-notes">
      코드 블록은 <b>&lt;pre&gt;&lt;code&gt;</b>여기에 코드 입력<b>&lt;/code&gt;&lt;/pre&gt;</b>를 사용해주세요
    </div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL - 장면 그래프';
            var disqus_title = 'WebGL - 장면 그래프';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "Thank you <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>for <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} contributions</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
(function() {
  if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
      return;
  }

  function addScript(src, type, fn) {
    const script = document.createElement('script');
    const firstScript = document.getElementsByTagName('script')[0];
    script.async = true;
    script.defer = true;
    script.type = type || 'javascript';
    if (fn) {
      script.addEventListener('load', fn);
    }
    script.src = src;
    firstScript.parentNode.insertBefore(script, firstScript);
  }

  // can't do this because it would eat contexts
  //addScript('//gpustats.org/stats.js', 'module');

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59804936-1', 'auto');
  ga('send', 'pageview');
}());
</script>


</html>



