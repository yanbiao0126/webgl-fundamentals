<!DOCTYPE html>
<!-- this file is auto-generated from webgl/lessons/zh_cn/webgl-tips.md. Do not edited directly -->
<!--
Copyright 2021 GFXFundamentals.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:

*   Redistributions of source code must retain the above copyright
    notice, this list of conditions and the following disclaimer.

*   Redistributions in binary form must reproduce the above
    copyright notice, this list of conditions and the following disclaimer
    in the documentation and/or other materials provided with the
    distribution.

*   Neither the name of GFXFundamentals. nor the names of his
    contributors may be used to endorse or promote products derived from
    this software without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
"AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
-->
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="WebGL 中可能绊倒你的小问题">
<meta name="keywords" content="webgl graphics">
<meta name="thumbnail" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-tips_zh-cn.jpg">

<meta property="og:title" content="WebGL 小技巧">
<meta property="og:type" content="website">
<meta property="og:image" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-tips_zh-cn.jpg">
<meta property="og:description" content="WebGL 中可能绊倒你的小问题">
<meta property="og:url" content="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html">

<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site" content="@greggman">
<meta name="twitter:creator" content="@greggman">
<meta name="twitter:domain" content="webglfundamentals.org">
<meta name="twitter:title" content="WebGL 小技巧">
<meta name="twitter:url" content="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html">
<meta name="twitter:description" content="WebGL 中可能绊倒你的小问题">
<meta name="twitter:image:src" content="https://webglfundamentals.org/webgl/lessons/screenshots/webgl-tips_zh-cn.jpg">

<script type="application/ld+json">
{
  "@context":"https://schema.org",
  "@graph":[
    {
      "@type":"WebSite",
      "@id":"https://webglfundamentals.org/#website",
      "url":"https://webglfundamentals.org/",
      "name":"WebglFundamentals"
    },
    {
      "@type":"ImageObject",
      "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html#primaryimage",
      "url":"https://webglfundamentals.org/webgl/lessons/screenshots/webgl-tips_zh-cn.jpg",
      "width":1200,
      "height":630
    },
    {
      "@type":"WebPage",
      "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html#webpage",
      "url":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html",
      "inLanguage":"zh-cn",
      "name":"WebGL 小技巧",
      "keywords":"webgl graphics programming",
      "isPartOf":{
        "@id":"https://webglfundamentals.org/#website"
      },
      "primaryImageOfPage":{
        "@id":"https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html#primaryimage"
      }
    }
  ]
}
</script>


<title>WebGL 小技巧</title>
<link href="/webgl/lessons/resources/webglfundamentals-icon.png" rel="shortcut icon" type="image/png">
<link rel="stylesheet" href="/webgl/lessons/lang.css">
<link rel="stylesheet" href="/webgl/lessons/resources/lesson.css">

  <link rel="alternate" hreflang="en" href="https://webglfundamentals.org/webgl/lessons/webgl-tips.html">
  <link rel="alternate" hreflang="fr" href="https://webglfundamentals.org/webgl/lessons/fr/webgl-tips.html">
  <link rel="alternate" hreflang="ja" href="https://webglfundamentals.org/webgl/lessons/ja/webgl-tips.html">
  <link rel="alternate" hreflang="ko" href="https://webglfundamentals.org/webgl/lessons/ko/webgl-tips.html">
  <link rel="alternate" hreflang="pl" href="https://webglfundamentals.org/webgl/lessons/pl/webgl-tips.html">
  <link rel="alternate" hreflang="pt-br" href="https://webglfundamentals.org/webgl/lessons/pt-br/webgl-tips.html">
  <link rel="alternate" hreflang="ru" href="https://webglfundamentals.org/webgl/lessons/ru/webgl-tips.html">
  <link rel="alternate" hreflang="uk" href="https://webglfundamentals.org/webgl/lessons/uk/webgl-tips.html">
  <link rel="alternate" hreflang="zh_cn" href="https://webglfundamentals.org/webgl/lessons/zh_cn/webgl-tips.html">




</head>
<body>
<div class="webgl_navbar">
  <div>
    <select class="language">
    <option value="/webgl/lessons/webgl-tips.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-tips.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-tips.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-tips.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-tips.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-tips.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-tips.html" >Русский</a>
    <option value="/webgl/lessons/uk/webgl-tips.html" >Українська</a>
    <option value="/webgl/lessons/zh_cn/webgl-tips.html" selected>简体中文</a>
</select>


    <a href="#toc">目录</a>
  </div>
</div>
<div class="webgl_header">
  <h1><a href="/webgl/lessons/zh_cn/">WebGLFundamentals.org</a></h1>
<style>
#forkongithub>div {
    background: #000;
    color: #fff;
    font-family: arial,sans-serif;
    text-align: center;
    font-weight: bold;
    padding: 5px 40px;
    font-size: 0.9rem;
    line-height: 1.3rem;
    position: relative;
    transition: 0.5s;
    display: block;
    width: 400px;
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(200px) rotate(45deg) translate(10px,70px);
    box-shadow: 4px 4px 10px rgba(0,0,0,0.8);
    pointer-events: auto;
}
#forkongithub a {
  text-decoration: none;
  color: #fff;
}
#forkongithub>div:hover {
    background: #c11;
    color: #fff;
}
#forkongithub .contributors {
  font-size: 0.75rem;
  background: rgba(255,255,255,0.2);
  line-height: 1.2;
  padding: 0.1em;
}
#forkongithub>div::before,#forkongithub>div::after {
    content: "";
    width: 100%;
    display: block;
    position: absolute;
    top: 1px;
    left: 0;
    height: 1px;
    background: #fff;
}
#forkongithub>div::after {
    bottom: 1px;
    top: auto;
}

#forkongithub{
    z-index: 9999;
    /* needed for firefox */
    overflow: hidden;
    width: 300px;
    height: 300px;
    position: absolute;
    right: 0;
    top: 0;
    pointer-events: none;
}
#forkongithub svg{
  width: 1em;
  height: 1em;
  vertical-align: middle;
}
#forkongithub img {
  width: 1em;
  height: 1em;
  border-radius: 100%;
  vertical-align: middle;
}

@media (max-width: 900px) {
    #forkongithub>div {
        line-height: 1.2rem;
    }
}
@media (max-width: 700px) {
  #forkongithub {
    display: none;
  }
}
@media (max-width: 410px) {
    #forkongithub>div {
        font-size: 0.7rem;
        transform: translateX(150px) rotate(45deg) translate(20px,40px);
    }
}

</style>
<div id="forkongithub"><div><div><a href="https://github.com/gfxfundamentals/webgl-fundamentals">Fix, Fork, Contribute <?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="100%" height="100%" viewBox="0 0 136 133" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" xmlns:serif="http://www.serif.com/" style="fill-rule:evenodd;clip-rule:evenodd;stroke-linejoin:round;stroke-miterlimit:2;">
    <g transform="matrix(3.92891,0,0,3.92891,67.867,129.125)">
        <path d="M0,-31.904C-8.995,-31.904 -16.288,-24.611 -16.288,-15.614C-16.288,-8.417 -11.621,-2.312 -5.148,-0.157C-4.333,-0.008 -4.036,-0.511 -4.036,-0.943C-4.036,-1.329 -4.05,-2.354 -4.058,-3.713C-8.589,-2.729 -9.545,-5.897 -9.545,-5.897C-10.286,-7.779 -11.354,-8.28 -11.354,-8.28C-12.833,-9.29 -11.242,-9.27 -11.242,-9.27C-9.607,-9.155 -8.747,-7.591 -8.747,-7.591C-7.294,-5.102 -4.934,-5.821 -4.006,-6.238C-3.858,-7.29 -3.438,-8.008 -2.972,-8.415C-6.589,-8.826 -10.392,-10.224 -10.392,-16.466C-10.392,-18.244 -9.757,-19.698 -8.715,-20.837C-8.883,-21.249 -9.442,-22.905 -8.556,-25.148C-8.556,-25.148 -7.188,-25.586 -4.076,-23.478C-2.777,-23.84 -1.383,-24.02 0.002,-24.026C1.385,-24.02 2.779,-23.84 4.08,-23.478C7.19,-25.586 8.555,-25.148 8.555,-25.148C9.444,-22.905 8.885,-21.249 8.717,-20.837C9.761,-19.698 10.392,-18.244 10.392,-16.466C10.392,-10.208 6.583,-8.831 2.954,-8.428C3.539,-7.925 4.06,-6.931 4.06,-5.411C4.06,-3.234 4.04,-1.477 4.04,-0.943C4.04,-0.507 4.333,0 5.16,-0.159C11.628,-2.318 16.291,-8.419 16.291,-15.614C16.291,-24.611 8.997,-31.904 0,-31.904" style="fill:white;"/>
    </g>
</svg>
</a></div></div></div>

</div>


<div class="container">
  <div class="lesson-title">
    <h1>WebGL 小技巧</h1>
  </div>
  <div class="lesson">
    <div class="lesson-main">
      <p>这篇文章是一些在使用 WebGL 过程中可能遇到的小问题合集。</p>
<hr>
<p><a id="screenshot" data-toc="截屏"></a></p>
<h1 id="-">从画布中截屏</h1>
<p>在浏览器中，有 2 个有效的截屏函数。
旧的是 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toDataURL"><code class="notranslate" translate="no">canvas.toDataURL</code></a>，
更好更新的是 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/toBlob"><code class="notranslate" translate="no">canvas.toBlob</code></a></p>
<p>所以你可能以为加一些下面的代码就可以很容易的截图：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-html">&lt;canvas id=&quot;c&quot;&gt;&lt;/canvas&gt;
+&lt;button id=&quot;screenshot&quot; type=&quot;button&quot;&gt;Save...&lt;/button&gt;
</code></pre>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">const elem = document.querySelector(&#39;#screenshot&#39;);
elem.addEventListener(&#39;click&#39;, () =&gt; {
  canvas.toBlob((blob) =&gt; {
    saveBlob(blob, `screencapture-${canvas.width}x${canvas.height}.png`);
  });
});

const saveBlob = (function() {
  const a = document.createElement(&#39;a&#39;);
  document.body.appendChild(a);
  a.style.display = &#39;none&#39;;
  return function saveData(blob, fileName) {
     const url = window.URL.createObjectURL(blob);
     a.href = url;
     a.download = fileName;
     a.click();
  };
}());
</code></pre>
<p>这里有个来自 <a href="webgl-animation.html">关于动画的文章</a> 的例子，用上面的代码和一些 CSS 来放置按键。</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-tips-screenshot-bad.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-tips-screenshot-bad.html" target="_blank">点此在新窗口中浏览</a>
</div>

</p>
<p>然后我的到了下面的截图</p>
<div class="webgl_center"><img src="../resources/screencapture-398x298.png"></div>

<p>是的，就是一张空白图片。</p>
<p>上面的代码有可能正常工作，取决于你的浏览器/操作系统。
但一般来说，它不会正常工作。</p>
<p>这问题的原因，是因为为了性能和兼容性，当完成绘制后，浏览器默认会清除 WebGL 画布的绘制缓存。</p>
<p>有 3 种解决方法。</p>
<ol>
<li><p>在截图前调用渲染代码</p>
<p> 假设我们使用的绘制代码是 <code class="notranslate" translate="no">drawScene</code> 函数。
 最好不要对它有所改动，然后在截图前调用它进行渲染。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js"> elem.addEventListener(&#39;click&#39;, () =&gt; {
 +  drawScene();
   canvas.toBlob((blob) =&gt; {
     saveBlob(blob, `screencapture-${canvas.width}x${canvas.height}.png`);
   });
 });
</code></pre>
</li>
<li><p>在渲染循环中调用截图代码</p>
<p> 在这种情况下，当我们想要截图时，设置标志位，然后在渲染循环中去进行截图。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js"> let needCapture = false;
 elem.addEventListener(&#39;click&#39;, () =&gt; {
    needCapture = true;
 });
</code></pre>
<p> 然后在渲染循环中（当前是在 <code class="notranslate" translate="no">drawScene</code> 中实现的），所有内容都完成绘制后：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js"> function drawScene(time) {
   ...

 +  if (needCapture) {
 +    needCapture = false;
 +    canvas.toBlob((blob) =&gt; {
 +      saveBlob(blob, `screencapture-${canvas.width}x${canvas.height}.png`);
 +    });
 +  }

   ...
 }
</code></pre>
</li>
<li><p>创建 WebGL context 时设置 <code class="notranslate" translate="no">preserveDrawingBuffer: true</code></p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js"> const gl = someCanvas.getContext(&#39;webgl&#39;, {preserveDrawingBuffer: true});
</code></pre>
<p> 这让 WebGL 在将画布和页面其它内容合成后不清除画布，防止 <em>可能</em> 的优化。</p>
</li>
</ol>
<p>我会选上面的 #1。在这个特定的例子中，我会将更新状态的代码从绘制部分中抽取出来。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">  var then = 0;

-  requestAnimationFrame(drawScene);
+  requestAnimationFrame(renderLoop);

+  function renderLoop(now) {
+    // 转换成秒
+    now *= 0.001;
+    // 当前时间减去之前时间
+    var deltaTime = now - then;
+    // 为下一帧记住当前时间
+    then = now;
+
+    // 每一帧都增加一点旋转
+    rotation[1] += rotationSpeed * deltaTime;
+
+    drawScene();
+
+    // 为下一帧再次调用 renderLoop
+    requestAnimationFrame(renderLoop);
+  }

  // 绘制场景
+  function drawScene() {
- function drawScene(now) {
-    // 转换成秒
-    now *= 0.001;
-    // 当前时间减去之前时间
-    var deltaTime = now - then;
-    // 为下一帧记住当前时间
-    then = now;
-
-    // 每一帧都增加一点旋转
-    rotation[1] += rotationSpeed * deltaTime;

    webglUtils.resizeCanvasToDisplaySize(gl.canvas);

    ...

-    // 为下一帧再次调用 drawScene
-    requestAnimationFrame(drawScene);
  }
</code></pre>
<p>现在我们可以在截图前调用 <code class="notranslate" translate="no">drawScene</code> 了。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">elem.addEventListener(&#39;click&#39;, () =&gt; {
+  drawScene();
  canvas.toBlob((blob) =&gt; {
    saveBlob(blob, `screencapture-${canvas.width}x${canvas.height}.png`);
  });
});
</code></pre>
<p>现在应该可以正常工作了。</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-tips-screenshot-good.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-tips-screenshot-good.html" target="_blank">点此在新窗口中浏览</a>
</div>

</p>
<p>如果你检查截图，会发现背景是透明的。
看 <a href="webgl-and-alpha.html">这篇文章</a> 获取一些细节。</p>
<p><a id="preservedrawingbuffer" data-toc="防止画布被清空"></a></p>
<h1 id="-">防止画布被清空</h1>
<p>假设你想让用户绘制动画物体，当你创建 WebGL context 时需要设置 <code class="notranslate" translate="no">preserveDrawingBuffer: true</code>。
这防止浏览器清空画布。</p>
<p>像 <a href="webgl-animation.html">关于动画的文章</a> 的例子。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">var canvas = document.querySelector(&quot;#canvas&quot;);
-var gl = canvas.getContext(&quot;webgl&quot;);
+var gl = canvas.getContext(&quot;webgl&quot;, {preserveDrawingBuffer: true});
</code></pre>
<p>然后改成调用 <code class="notranslate" translate="no">gl.clear</code>，这样只会清除深度信息缓存。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">-// 清除画布和深度信息的缓存
-gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);
+// 清除深度信息的缓存
+gl.clear(gl.DEPTH_BUFFER_BIT);
</code></pre>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-tips-preservedrawingbuffer.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-tips-preservedrawingbuffer.html" target="_blank">点此在新窗口中浏览</a>
</div>

</p>
<p>注意，如果你真的想写一个绘制程序，上面的方法不是一个好的方案，因为只要改变分辨率，浏览器就会清空画布。
修改的分辨率是基于显示大小的，当窗口大小改变时，显示大小也会改变。
这包括当用户下载文件时，即使不在一个窗口浏览器添加了一个状态栏。
也包括了用户旋转了手机，浏览器从竖屏切换到了横屏。</p>
<p>如果你真在想要写个绘制程序，你最好 <a href="webgl-render-to-texture.html">渲染到纹理</a>。</p>
<hr>
<p><a id="tabindex" data-toc="在画布中获取键盘输入"></a></p>
<h1 id="-">获取键盘输入</h1>
<p>如果你在做一个整页/全屏的 WebGL 应用，那你可以做任何你想做的。
但通常情况会是大的页面中有一块画布，当用户点击画布时，画布可以获取键盘输入。
但一般来说画布无法获取键盘输入。
解决方法是将画布的 <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/tabIndex"><code class="notranslate" translate="no">tabindex</code></a> 设置成 0 或者更大。例如：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-html">&lt;canvas tabindex=&quot;0&quot;&gt;&lt;/canvas&gt;
</code></pre>
<p>但这会造成新的问题。任何有 <code class="notranslate" translate="no">tabindex</code> 设置的元素在聚焦时都会高亮。
要解决这个问题，在 CSS 中将它的聚焦轮廓设成 none</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-css">canvas:focus {
  outline: none;
}
</code></pre>
<p>举个例子，这里有 3 个画布：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-html">&lt;canvas id=&quot;c1&quot;&gt;&lt;/canvas&gt;
&lt;canvas id=&quot;c2&quot; tabindex=&quot;0&quot;&gt;&lt;/canvas&gt;
&lt;canvas id=&quot;c3&quot; tabindex=&quot;1&quot;&gt;&lt;/canvas&gt;
</code></pre>
<p>设置最后一个画布:</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-css">#c3:focus {
  outline: none;
}
</code></pre>
<p>对它们挂上同样的事件监听：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-js">document.querySelectorAll(&#39;canvas&#39;).forEach((canvas) =&gt; {
  const ctx = canvas.getContext(&#39;2d&#39;);

  function draw(str) {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.textAlign = &#39;center&#39;;
    ctx.textBaseline = &#39;middle&#39;;
    ctx.fillText(str, canvas.width / 2, canvas.height / 2);
  }
  draw(canvas.id);

  canvas.addEventListener(&#39;focus&#39;, () =&gt; {
    draw(&#39;has focus press a key&#39;);
  });

  canvas.addEventListener(&#39;blur&#39;, () =&gt; {
    draw(&#39;lost focus&#39;);
  });

  canvas.addEventListener(&#39;keydown&#39;, (e) =&gt; {
    draw(`keyCode: ${e.keyCode}`);
  });
});
</code></pre>
<p>观察到第一个画布无法获取键盘输入。
第二个画布可以获取键盘输入，但是被高亮了。
第三个画布既获取了键盘输入，又没有被高亮。</p>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-tips-tabindex.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-tips-tabindex.html" target="_blank">点此在新窗口中浏览</a>
</div>

</p>
<hr>
<p><a id="html-background" data-toc="将 WebGL 作为 HTML 的背景"></a></p>
<h1 id="-webgl-">将 WebGL 动画作为背景</h1>
<p>一个常被问到的问题是，如何将 WebGL 动画用作网页的背景。</p>
<p>有 2 种方法：</p>
<ul>
<li>将画布的 CSS 属性 <code class="notranslate" translate="no">position</code> 设置成 <code class="notranslate" translate="no">fixed</code></li>
</ul>
<pre class="prettyprint notranslate" translate="no"><code class="lang-css">#canvas {
 position: fixed;
 left: 0;
 top: 0;
 z-index: -1;
 ...
}
</code></pre>
<p>并将 <code class="notranslate" translate="no">z-index</code> 设置成 -1。</p>
<p>这么做的缺点是，你的 JavaScript 代码必须嵌入在页面中，
并且如果你的页面很复杂，需要确保 WebGL 代码中的 JavaScript 和页面中的 JavaScript 不冲突。</p>
<ul>
<li>使用 <code class="notranslate" translate="no">iframe</code></li>
</ul>
<p>这是这个 <a href="/">网站主页</a> 使用的方案。</p>
<p>在你的网页中插入一个 iframe，例如：</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-html">&lt;iframe id=&quot;background&quot; src=&quot;background.html&quot;&gt;&lt;/iframe&gt;
&lt;div&gt;
  这里是你的内容
&lt;/div&gt;
</code></pre>
<p>然后给 iframe 设置样式，填满窗口并且作为背景。
代码几乎和上面设置画布一样，除了将 <code class="notranslate" translate="no">border</code> 设置成 <code class="notranslate" translate="no">none</code>，因为 iframe 默认有边框。</p>
<pre class="prettyprint notranslate" translate="no"><code class="lang-css">#background {
    position: fixed;
    width: 100vw;
    height: 100vh;
    left: 0;
    top: 0;
    z-index: -1;
    border: none;
    pointer-events: none;
}
</code></pre>
<p><div class="webgl_example_container">
  <iframe class="webgl_example" style=" " src="/webgl/resources/editor.html?url=/webgl/lessons/..%2Fwebgl-tips-html-background.html"></iframe>
  <a class="webgl_center" href="/webgl/lessons/../webgl-tips-html-background.html" target="_blank">点此在新窗口中浏览</a>
</div>

</p>

    </div>
    <div class="lesson-sidebar">
        <select class="language">
    <option value="/webgl/lessons/webgl-tips.html" >English</a>
    <option value="/webgl/lessons/fr/webgl-tips.html" >Français</a>
    <option value="/webgl/lessons/ja/webgl-tips.html" >日本語</a>
    <option value="/webgl/lessons/ko/webgl-tips.html" >한국어</a>
    <option value="/webgl/lessons/pl/webgl-tips.html" >Polski</a>
    <option value="/webgl/lessons/pt-br/webgl-tips.html" >Portuguese</a>
    <option value="/webgl/lessons/ru/webgl-tips.html" >Русский</a>
    <option value="/webgl/lessons/uk/webgl-tips.html" >Українська</a>
    <option value="/webgl/lessons/zh_cn/webgl-tips.html" selected>简体中文</a>
</select>


        <div id="toc">
          <ul>  <li>基础概念</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-fundamentals.html">WebGL 基础概念</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-how-it-works.html">WebGL 工作原理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-shaders-and-glsl.html">WebGL 着色器和GLSL</a></li>
<li><a href="/webgl/lessons/resources/webgl-state-diagram.html">WebGL State Diagram</a></li>
        </ul>
  <li>图像处理</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-image-processing.html">WebGL 图像处理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-image-processing-continued.html">WebGL 进一步处理图像</a></li>
        </ul>
  <li>二维平移，旋转，缩放和矩阵运算</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-2d-translation.html">WebGL 二维平移</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-rotation.html">WebGL 二维旋转</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-scale.html">WebGL 二维缩放</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-matrices.html">WebGL 二维矩阵</a></li>
        </ul>
  <li>三维</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-orthographic.html">WebGL 三维正射投影</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-perspective.html">WebGL 三维透视投影</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-camera.html">WebGL 三维相机</a></li>
        </ul>
  <li>光照</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-directional.html">WebGL 三维方向光源</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-point.html">WebGL 三维点光源</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-lighting-spot.html">WebGL 三维聚光灯</a></li>
        </ul>
  <li>组织和重构</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-less-code-more-fun.html">WebGL 码少趣多</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-drawing-multiple-things.html">WebGL 绘制多个物体</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-scene-graph.html">WebGL 场景图</a></li>
        </ul>
  <li>几何</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-geometry-lathe.html">WebGL 三维几何加工</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-load-obj.html">WebGL 加载 .obj 文件</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-load-obj-w-mtl.html">WebGL 加载带 .mtl 的 .obj 文件</a></li>
        </ul>
  <li>纹理</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-3d-textures.html">WebGL 三维纹理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-data-textures.html">WebGL 数据纹理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2-textures.html">WebGL 使用多个纹理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-cors-permission.html">WebGL 跨域图像</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-3d-perspective-correct-texturemapping.html">WebGL 纹理映射的透视纠正</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-planar-projection-mapping.html">平面的和透视的投影映射</a></li>
        </ul>
  <li>渲染到纹理</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-render-to-texture.html">WebGL 渲染到纹理</a></li>
        </ul>
  <li>阴影</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-shadows.html">阴影</a></li>
        </ul>
  <li>技术</li>
        <ul>
            <li>二维</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-2d-drawimage.html">WebGL 二维DrawImage</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-matrix-stack.html">WebGL 二维矩阵栈</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-sprites.html">精灵</a></li>
        </ul>
  <li>三维</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-cube-maps.html">WebGL 立方体贴图</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-environment-maps.html">WebGL 环境贴图</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-skybox.html">WebGL 天空盒</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-skinning.html">WebGL 蒙皮</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-fog.html">WebGL 雾</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-picking.html">抓取 (点击的东西)</a></li>
        </ul>
  <li>文字</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-text-html.html">WebGL 文字 - HTML</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-canvas2d.html">WebGL 文字 - 二维Canvas</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-texture.html">WebGL 文字 - 使用纹理</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-text-glyphs.html">WebGL 文字 - 使用字形纹理</a></li>
        </ul>
  <li>纹理</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-ramp-textures.html">Ramp Textures (Toon Shading)</a></li>
        </ul>
  <li>GPGPU</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-gpgpu.html">GPGPU</a></li>
        </ul>
        </ul>
  <li>建议</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-smallest-programs.html">WebGL 最小的程序</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-drawing-without-data.html">无数据绘图</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-shadertoy.html">Shadertoy</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-pulling-vertices.html">Pulling Vertices</a></li>
        </ul>
  <li>优化</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-indexed-vertices.html">顶点索引 （gl.drawElements)</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-instanced-drawing.html">实例化绘制</a></li>
        </ul>
  <li>杂项</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-setup-and-installation.html">WebGL 设置和安装</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-boilerplate.html">WebGL 样板</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-resizing-the-canvas.html">WebGL 重置画布尺寸</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-animation.html">WebGL 动画</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-points-lines-triangles.html">WebGL 点、线和三角</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-multiple-views.html">Multiple Views, Multiple Canvases</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-visualizing-the-camera.html">可视化相机</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-and-alpha.html">WebGL 和阿尔法通道</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-2d-vs-3d-library.html">WebGL 2D vs 3D 库</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-anti-patterns.html">WebGL 错误模式</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-matrix-vs-math.html">WebGL 矩阵 vs 数学中的矩阵</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-precision-issues.html">Precision Issues</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#screenshot">截屏</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#preservedrawingbuffer">防止画布被清空</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#tabindex">在画布中获取键盘输入</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-tips.html#html-background">将 WebGL 作为 HTML 的背景</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-cross-platform-issues.html">WebGL 跨平台相关问题</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-qna.html">Questions and Answers</a></li>
        </ul>
  <li>参考</li>
        <ul>
          <li><a href="/webgl/lessons/zh_cn/webgl-attributes.html">WebGL 属性</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-texture-units.html">WebGL 纹理单元</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-framebuffers.html">WebGL 帧缓冲</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-readpixels.html">WebGL readPixels</a></li>
<li><a href="/webgl/lessons/zh_cn/webgl-references.html">WebGL 参考</a></li>
        </ul></ul>
<ul>
  <li><a href="/docs/">API 帮助文档</a></li>
  <li><a href="https://twgljs.org">TWGL, 一个轻量级WebGL辅助库</a></li>
  <li><a href="https://github.com/gfxfundamentals/webgl-fundamentals">GitHub</a></li>
</ul>
        </div>
    </div>
    <div class="lesson-comments">
        
<div>有疑问? <a href="https://stackoverflow.com/questions/tagged/webgl">在stackoverflow上提问</a>.</div>
<div>Issue/Bug? <a href="https://github.com/gfxfundamentals/webgl-fundamentals/issues">在GitHub上提issue</a>.</div>
<div class="lesson-comment-notes">
   使用 <b>&lt;pre&gt;&lt;code&gt;</b> 代码 <b>&lt;/code&gt;&lt;/pre&gt;</b> 的格式编写代码块
</div>
  

        <div id="disqus_thread"></div>
        <script>
            /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
            var disqus_shortname = 'webglfundamentals'; // required: replace example with your forum shortname
            var disqus_identifier = 'WebGL 小技巧';
            var disqus_title = 'WebGL 小技巧';

            /* * * DON'T EDIT BELOW THIS LINE * * */
            (function() {
                if (window.location.hostname.indexOf("webglfundamentals.org") < 0) {
                    return;
                }
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </div>
</div>
</body>
<script>
const settings = {
  contribTemplate: "感谢 <a href=\"${html_url}\"><img src=\"${avatar_url}\"> ${login}</a><br>的 <a href=\"https://github.com/${owner}/${repo}/commits?author=${login}\">${contributions} 次贡献</a>",
  owner: "gfxfundamentals",
  repo: "webgl-fundamentals",
};
</script>
<script src="/contributors.js"></script>
<script src="/3rdparty/jquery-1.11.2.min.js"></script>
<script src="/webgl/lessons/resources/prettify.js"></script>
<script src="/webgl/lessons/resources/lesson.js" type="module"></script>
<script>
</script>


</html>



